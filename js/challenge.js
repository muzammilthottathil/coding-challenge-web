const problem = {
  day1: [
    {
      heading: "Birthday Cake Candles",
      description: "Determine the number of candles that are blown out.",
      link:
        "https://www.hackerrank.com/challenges/birthday-cake-candles/problem",
      whoDone: ["M", "N", "D"],
      date: "13-July-2020",
    },
    {
      heading: "Sort Binary Array",
      description:
        "Given an array, containing only 0 and 1 as its elements. The elements are kept in random order. You have to sort the array.",
      link:
        "https://codezen.codingninjas.com/practice/236720/5537/interview-shuriken-40:-sort-binary-array",
      whoDone: ["M", "N", "D"],
      date: "13-July-2020",
    },
    {
      heading: "Dutch National Flag",
      description:
        "You are given an array with only 0s,1s and 2s. Sort the array in O(n)",
      link:
        "https://practice.geeksforgeeks.org/problems/sort-an-array-of-0s-1s-and-2s/0",
      whoDone: ["M", "N", "D"],
      date: "13-July-2020",
    },
  ],
  day2: [
    {
      heading: "Top K Frequent Elements",
      description:
        "Given a non-empty array of integers, return the k most frequent elements.",
      link: "https://leetcode.com/problems/top-k-frequent-elements/",
      whoDone: ["M", "D"],
      date: "14-July-2020",
    },
    {
      heading: "Power Set",
      description:
        "Given a set of distinct integers, nums, return all possible subsets(The power set).",
      link: "https://practice.geeksforgeeks.org/problems/power-set/0",
      whoDone: ["D"],
      date: "14-July-2020",
    },
    {
      heading: "Closest product pair in an array",
      description:
        "Given an integer num, find the closest two integers in absolute difference whose product equals (num + 1 ) or (num + 2).",
      link: "https://www.geeksforgeeks.org/closest-product-pair-array/",
      whoDone: ["D"],
      date: "14-July-2020",
    },
  ],
  day3: [
    {
      heading: "First repeated character",
      description:
        "You are given a string. Find the first recurring character in the string.",
      link:
        "https://www.geeksforgeeks.org/find-the-first-repeated-character-in-a-string/",
      whoDone: ["M", "N"],
      date: "16-July-2020",
    },
    {
      heading: "Longest Sequence",
      description:
        "You are given an unsorted array. Find the length of the longest sequence of consecutive numbers in the array.",
      link:
        "https://codezen.codingninjas.com/practice/470/2295/longest-sequence",
      whoDone: [],
      date: "16-July-2020",
    },
    {
      heading: "Group Anagrams Together",
      description: "You are given an array, group the anagrams together.",
      link: "https://practice.geeksforgeeks.org/problems/k-anagrams-1/0",
      whoDone: [],
      date: "16-July-2020",
    },
  ],
  day4: [
    {
      heading: "Merge Two linked lists",
      description:
        "Given two linked lists sorted in increasing order. Merge them such a way that the result list is in decreasing order",
      link:
        "https://codezen.codingninjas.com/practice/469/762/merge-two-linked-lists",
      whoDone: ["D"],
      date: "17-July-2020",
    },
    {
      heading: "Rearrange linked list",
      description:
        "Given a singly linked list L : L0→L1→…→Ln-1→Ln . Rearrange the nodes in the list so that the new formed list is : L0→Ln→L1→Ln-1→L2→Ln-2→…",
      link:
        "https://codezen.codingninjas.com/practice/469/764/rearrange-linked-list",
      whoDone: ["D"],
      date: "17-July-2020",
    },
    {
      heading: "Angry Professor",
      description:
        "Decide whether or not the class will be canceled based on the arrival times of its students.",
      link: "http://hr.gs/4jfml",
      whoDone: ["M", "D"],
      date: "17-July-2020",
    },
  ],
  day5: [
    {
      heading: "Sherlock and Array",
      description:
        "Check whether there exists an element in the array such that sum of elements on its left is equal to the sum of elements on its right.",
      link: "http://hr.gs/4ta16",
      whoDone: ["D"],
      date: "19-July-2020",
    },
    {
      heading: "Reverse Alternate Nodes",
      description:
        "Given a perfect binary tree having N nodes, you have to reverse its alternate levels. That is reverse level 2, level 4 and so on. Root is at level 1.",
      link:
        "https://codezen.codingninjas.com/practice/540641/794/reverse-alternate-nodes",
      whoDone: [],
      date: "19-July-2020",
    },
    {
      heading: "Reverse Level Order Traversal",
      description:
        "Given a binary tree.Traverse the tree in the manner of reverse level order.",
      link:
        "https://codezen.codingninjas.com/practice/537962/1930/reverse-level-order-traversal",
      whoDone: ["D"],
      date: "19-July-2020",
    },
  ],
  day6: [
    {
      heading: "Least Number of Unique Integers after K Removals",
      description:
        "Given an array of integers arr and an integer k. Find the least number of unique integers after removing exactly k elements.",
      link:
        "https://practice.geeksforgeeks.org/problems/minimum-distinct-ids/0",
      whoDone: [],
      date: "20-July-2020",
    },
    {
      heading: "Product array puzzle",
      description:
        "Given an array, replace each element with the product of every other elements in the array without using division operator",
      link:
        "https://practice.geeksforgeeks.org/problems/product-array-puzzle/0",
      whoDone: [],
      date: "20-July-2020",
    },
    {
      heading: "Distinct Echo Substrings",
      description:
        "Return the number of distinct non-empty substrings of text that can be written as the concatenation of some string with itself ",
      link: "https://leetcode.com/problems/distinct-echo-substrings/",
      whoDone: [],
      date: "20-July-2020",
    },
  ],
  day7: [
    {
      heading: "Vipul And Modulus",
      description:
        "Find out how many numbers can be formed by rearranging digits of number N whose modulo M is 0.",
      link: "https://hack.codingblocks.com/app/dcb/512",
      whoDone: [],
      date: "22-July-2020",
    },
    {
      heading: "Chocolate on Sale",
      description:
        "If Martin buys a single chocolate from the bakery, he’ll get atmost K chocolates ( all of different varieties) for free. Find the minimum amount of money to spend on buying all the varieties of chocolates.",
      link: "https://hack.codingblocks.com/app/dcb/1530",
      whoDone: [],
      date: "22-July-2020",
    },
    {
      heading: "Largest Subarray with 0 and 1",
      description:
        "You are Given an array containing only 0s and 1s, find the largest subarray which contain equal no of 0s and 1s.",
      link: "https://hack.codingblocks.com/app/dcb/68",
      whoDone: [],
      date: "22-July-2020",
    },
  ],
};

/* ==================================================================
   ==================================================================


                        Javasrcipt Here


  ===================================================================
  ===================================================================*/

let currentDay = 7;

let currentCoderId = Number(window.localStorage.getItem("currentCoderId"));
const coders = ["D", "M", "N"];

let problemNumber,
  problemLink,
  date,
  problemHeading,
  problemDescription,
  whoDoneIndividual;

const individualCards = (
  problemNumber,
  date,
  problemHeading,
  problemDescription,
  whoDoneHtml,
  problemLink
) => {
  let cardTop =
    '<div class="top"><div id="problem-number">Problem #' +
    problemNumber +
    '</div><div id="date">' +
    date +
    "</div></div>";

  let cardMiddle =
    '<div class="middle"><div id="problem-heading">' +
    problemHeading +
    '</div><div id = "problem-description">' +
    problemDescription +
    "</div></div >";

  let cardBottom =
    '<div class="bottom"><div class="who-done">' +
    whoDoneHtml +
    '</div><a href="' +
    problemLink +
    '" class="get-task">GET TASK NOW</a></div >';

  return '<div class="card">' + cardTop + cardMiddle + cardBottom + "</div>";
};

let whoDoneHtml = "";

let totalIndividualCards;

const totalCards = (totalIndividualCards) =>
  '<div class="cards">' + totalIndividualCards + "</div>";

let dayNumber;

const dayNumberHtml = (dayNumber) =>
  '<div id="day-number">Day-' + dayNumber + "</div>";

let totalProblemCount = Object.keys(problem).length;
dayNumber = 3;

let dayRetrive = "day" + currentDay;

const showAllDays = () => {
  totalProblems = "";

  for (let i = 1; i <= totalProblemCount; i++) {
    let day = "day" + i;
    totalIndividualCards = "";

    problem[day].forEach((task, taskNumber) => {
      whoDoneHtml = "";
      problemNumber = taskNumber + 1;
      date = task.date;
      problemHeading = task.heading;
      problemDescription = task.description;
      for (let i in task.whoDone) whoDoneHtml += " " + task.whoDone[i] + " ";
      problemLink = task.link;

      totalIndividualCards += individualCards(
        problemNumber,
        date,
        problemHeading,
        problemDescription,
        whoDoneHtml,
        problemLink
      );
    });

    totalProblems += dayNumberHtml(i) + totalCards(totalIndividualCards);
  }

  let challengeDayHtml = totalProblems;

  document.getElementById("challenge-day").innerHTML = challengeDayHtml;
  document.getElementById("show-today").style.display = "inline-block";
};

const loadCurrentDay = () => {
  totalIndividualCards = "";
  problem[dayRetrive].forEach((task, taskNumber) => {
    whoDoneHtml = "";
    problemNumber = taskNumber + 1;
    date = task.date;
    problemHeading = task.heading;
    problemDescription = task.description;
    for (let i in task.whoDone) whoDoneHtml += " " + task.whoDone[i] + " ";
    problemLink = task.link;

    totalIndividualCards += individualCards(
      problemNumber,
      date,
      problemHeading,
      problemDescription,
      whoDoneHtml,
      problemLink
    );
  });

  let challengeDayHtml =
    dayNumberHtml(currentDay) +
    totalCards(totalIndividualCards) +
    '<div class="show-all-challenges"><span onclick = "showAllDays()" > Show all Days</span>' +
    '<span onclick = "loadUnsolved()" >Unsolved Tasks</span></div >';

  document.getElementById("challenge-day").innerHTML = challengeDayHtml;
  document.getElementById("show-today").style.display = "none";
};

const loadUnsolved = () => {
  totalIndividualCards = "";
  let unSolvedCount = 0;
  for (let i = 1; i <= totalProblemCount; i++) {
    let day = "day" + i;

    problem[day].forEach((task, taskNumber) => {
      if (!task.whoDone.includes(coders[currentCoderId])) {
        unSolvedCount++;

        whoDoneHtml = "";
        problemNumber = taskNumber + 1;
        date = task.date;
        problemHeading = task.heading;
        problemDescription = task.description;
        for (let i in task.whoDone) whoDoneHtml += " " + task.whoDone[i] + " ";
        problemLink = task.link;

        totalIndividualCards += individualCards(
          problemNumber,
          date,
          problemHeading,
          problemDescription,
          whoDoneHtml,
          problemLink
        );
      }
    });
  }

  let challengeDayHtml;

  if (unSolvedCount) {
    challengeDayHtml =
      '<div id="day-number">Unsolved</div>' + totalCards(totalIndividualCards);

    document.getElementById("challenge-day").innerHTML = challengeDayHtml;
  } else {
    challengeDayHtml =
      '<div id="day-number">No Unsolved</div>' +
      totalCards(totalIndividualCards);

    document.getElementById("challenge-day").innerHTML = challengeDayHtml;
  }

  document.getElementById("show-today").style.display = "inline-block";
};

const load = () => {
  loadCurrentDay();
};

const showToday = () => {
  loadCurrentDay();
};
